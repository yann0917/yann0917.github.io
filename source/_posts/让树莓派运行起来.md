---
title: 让树莓派运行起来
tags:
  - RaspberryPi
  - 树莓派
categories: RaspberryPi
abbrlink: 51207
date: 2019-08-29 17:19:08
---

## Software Env

> MacOS 10.15 Catalina
> RaspberryPi 4B

## 安装系统

1. 安装系统刻录软件 [balenaEtcher]( https://www.balena.io/etcher/) `brew cask install balenaetcher`
2. 按步骤安装，在MacOS bata版本上遇到一些问题, [issues](https://github.com/balena-io/etcher/issues/2833)
3. 刻录完成之后将 SD 卡插入树莓派卡槽，通电即可启动

```bash
sudo /Applications/balenaEtcher.app/Contents/MacOS/balenaEtcher
```

## 配置无线连接及SSH 登录

* 开启SSH服务
  > 在SD卡的根目录下新建一个空白的文件，命名为 `ssh` 即可
  >
  > 登录树莓派使用 `pi` 用户，密码默认为 `raspberry`
* 接入无线网络
  > 在SD卡的根目录下新建一个名为 `wpa_supplicant.conf` 的配置文件即可，配置文件内容格式如下。

    ```text
    ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
    update_config=1

    network={
    ssid="ssid"
    psk="wifi password"
    key_mgmt=WPA-PSK
    priority=1
    scan_ssid=1
    }

    # WEP加密
    network={
    ssid="ssid"
    key_mgmt=NONE
    wep_key0="wifi password"
    }
    ```

  * `key_mgmt` 为WiFi加密方式，`NONE` 表示没有密码，`WPA-PSK` 表示使用WPA/WPA2加密；
  * `priority` 为WiFi连接优先级，为非负数，数字越大优先级越高；
  * `scan_ssid` 用于设置是否连接到隐藏ssid的WiFi，其值为1时表示连接。

## 更新源

Raspbian系统有两个apt源的配置文件，分别是:

* `/etc/apt/sources.list` 是Raspbian系统apt源的配置文件，包含了大部分的软件。
* `/etc/apt/sources.list.d/raspi.list` 是树莓派基apt源的配置文件，由树莓派基金会单独提供维护，仅包含raspi-config、minecraftpi、树莓派桌面环境、内核固件驱动等少量软件。

编辑 `sudo nano /etc/apt/sources.list` ，添加以下配置，将apt源修改为阿里云镜像

```conf
deb http://mirrors.aliyun.com/raspbian/raspbian/ buster main contrib non-free rpi
deb-src http://mirrors.aliyun.com/raspbian/raspbian/  buster main contrib non-free rpi
```

更新系统命令如下

```bash
sudo apt update # 更新apt源
sudo apt upgrade # 更新已安装的软件包
sudo apt dist-upgrade # 升级系统
```

> 以下为国内主流的Raspbian系统apt源镜像（/etc/apt/sources.list）：
>
> 中国科技大学 http://mirrors.ustc.edu.cn/raspbian/raspbian/
>
> 清华大学 https://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/
>
> 大连东软 http://mirrors.neusoft.edu.cn/raspbian/raspbian/
>
> 重庆大学 http://mirrors.cqu.edu.cn/raspbian/raspbian/
>
> 浙江大学 http://mirrors.zju.edu.cn/raspbian/raspbian/
>
> 阿里云 http://mirrors.aliyun.com/raspbian/raspbian/
>
> 搜狐 http://mirrors.sohu.com/raspbian/raspbian/
>
> 以下为国内主要的树莓派apt源镜像（/etc/apt/sources.list.d/raspi.list）：
>
> 清华大学 https://mirrors.tuna.tsinghua.edu.cn/raspberrypi/

## 系统配置

Raspbian系统自带一个叫 `raspi-config` 的系统配置工具，可以对树莓派的CPU频率、内存分配、网络、接口等众多项目进行配置，需要 root 权限

---
